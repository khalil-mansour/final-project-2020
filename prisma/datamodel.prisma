type User {
  id: ID! @id
  userId: String! @unique
  type: UserType @relation(name: "UserUserType")
  name: String!
  lastName: String!
  email: String! @unique
  groups: [Group!]! @relation(name: "UserGroups")
  transactions: [Transaction] @relation(name: "UserTransactions")
  contributions: [Contribution] @relation(name: "UserContributions")
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
}

type UserType {
  id: ID! @id
  type: String!
}

type Group {
  id: ID! @id
  name: String!
  address: Address! @relation(name: "GroupAddress")
  admin: User! @relation(name: "GroupAdmin")
  members: [User!]! @relation(name: "UserGroups")
  transactions: [Transaction] @relation(name: "GroupTransactions")
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
}

type Address {
  id: ID! @id
  country: String!
  province: String!
  city: String!
  street: String!
  apartment_unit: Int
}

type Invitation {
  id: ID! @id
  from: User! @relation(name: "InvitationSent")
  to: User!
  group: Group!
  link: String!
  status: Int!
  expiredAt: String!
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
}

type User_Group {
  id: ID! @id
  user_id: User! @relation
  group_id: Group! @relation
}

type Transaction {
  id: ID!
  paidBy: User! @relation(name: "TransactionPaidBy")
  amount: Float!
  description: String
  group: Group! @relation(name: "TransactionGroup")
  contributions: [Contribution!]! @relation(name: "TransactionContributions")
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt 
}

type Contribution {
  id: ID!
  user: User! @relation(name: "ContributionUser")
  transaction: Transaction! @relation(name: "Contribution")
  percentage: Float!
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
}